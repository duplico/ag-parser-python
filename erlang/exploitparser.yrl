Nonterminals root exploitlist e params pre prec post postc fact operation.
Terminals 'exploit' '(' ')' atom 'preconditions' 'postconditions' 'insert' 'delete' 'quality' 'topology' '=' ';' ',' ':' '.' .
Rootsymbol root.
Endsymbol '$end'.

root -> exploitlist: lists:flatten('$1').

exploitlist -> exploitlist e: ['$2','$1'].
exploitlist -> e : '$1'.

e -> 'exploit' atom '(' params ')' '=' pre post '.': {element(3,'$2'),lists:flatten('$4'),'$7','$8'}.

params -> atom ',' params : [element(3,'$1'),'$3'].
params -> atom : element(3,'$1').

pre ->  'preconditions' ':' prec : tl(lists:flatten('$3')).

prec -> fact prec : ['$2','$1'].
prec -> '$empty' : nil.

post ->  'postconditions' ':' postc : tl(lists:flatten('$3')).

postc -> operation postc : ['$2','$1'].
postc -> '$empty' : nil.

operation -> 'insert' fact : {insert, '$2'}.
operation -> 'delete' fact : {delete, '$2'}.

fact -> 'quality' ':' atom ',' atom ',' atom ';' : {quality,element(3,'$3'),element(3,'$5'),element(3,'$7')}.
fact -> 'topology' ':' atom ',' atom ',' atom ';' : {topology,element(3,'$3'),element(3,'$5'),element(3,'$7')}.
