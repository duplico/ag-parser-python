{% extends 'scenario_base.html' %}

{% macro render_field(field) %}
  <dt>{{ field.label }}</dt>
  <dd>
  {% if field.errors %}
    {% for error in field.errors %}<div class="error">{{ error }}</div>{% endfor %}
  {% endif %}
  {{ field(**kwargs)|safe }}
  </dd>
{% endmacro %}

{% block breadcrumb %}{{ super() }} : Scenario Share{% endblock %}

{% block ltitle %}Currently shared with{% endblock %}

{% block left %}
<ul>
{% for share in current_user.shared_scenarios %}
  {% if share.ag_name == name %}
    {% if share.dest_username != '*' %}
      <li>{{share.dest_username}}</li>
    {% else %}
      <li><strong>Everyone</strong></li>
    {% endif %}
  {% endif %}
{% endfor %}
</ul>
{% endblock %}

{% block rtitle %}Share Scenario{% endblock %}

{% block right %}
<form method="post" action="">
  {{ form.csrf }}
  <dl>
  {{ render_field(form.username) }}
  </dl>
  <input type="submit" value="Share {{ name }}">
</form>

<hr />

{% endblock %}
